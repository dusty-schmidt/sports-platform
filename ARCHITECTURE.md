Executive Summary: Sports Data Microservices Architecture1. Introduction and Core PhilosophyThis document outlines the architecture for the Sports Data Platform, built on a Microservices Architecture and orchestrated using Docker Compose. The primary goal is to establish a robust, flexible, and fault-tolerant system that can independently manage the collection, processing, and delivery of high-volume, real-time sports data (including DFS pools, live odds, and statistical projections).The core philosophy is Modularity and Isolation: every major functional requirement (e.g., fetching weather data, running the simulation engine, or serving the API) is encapsulated within its own containerized service.2. Architectural Overview: The Three-Tier Data PipelineThe platform is structured as a clear, three-tiered data pipeline, ensuring data flows logically from external sources to the end-user interface.TierFunctionDescriptionKey ServicesI: IngestionData CollectionDedicated services for acquiring raw, high-volume data from external APIs and sources (e.g., weather, odds, DFS salaries). They are scheduled independently.ingest-dfs, ingest-weather, ingest-odds, ingest-injuryII: ProcessingCompute & AnalysisServices responsible for consuming raw data from the database, applying complex logic (simulations, optimization), and writing refined data back to the database.sim-engine, optimizerIII: InterfaceDelivery & AccessThe user-facing layer, providing secure data access, managing user uploads (like custom CSV projections), and hosting the visual dashboard.backend-api, frontend3. Key Services and ResponsibilitiesTier I: Ingestion ServicesThese services are primarily data scrapers and fetchers. Their only interaction is with external APIs and the central database.DFS Pool Ingestion: Collects current DFS pools, salaries, and slate information across all supported sports.Live Odds Ingestion: Captures real-time betting odds and line movements across various markets.Weather Provider: Monitors and records relevant weather data for upcoming games at defined intervals.Injury Monitor: Scans designated sources (e.g., news feeds) for critical, late-breaking injury information.Tier II: Processing EnginesThese are the "brains" of the operation, relying entirely on the internal data state for their execution.Simulation Engine (sim-engine): Reads normalized data (stats, weather, odds) and executes probabilistic simulations to generate Projections. Outputs are stored as structured projection sets in the database.Lineup Optimizer (optimizer): Consumes DFS pools and calculated (or user-uploaded custom) Projections to solve the optimization problem, generating final Lineups.Tier III: Interface and User AccessThis layer decouples the complexity of the data pipeline from the user experience.Backend API (backend-api): A single point of contact for the frontend. It handles business logic like CSV validation, user authentication, and serving structured data queries from the processing engines.Frontend UI (frontend): The user interface (initially Streamlit for prototyping, later React) for visualizing data, running simulations via the API, and managing lineup optimization.4. Technical FoundationTechnologyRole in ArchitectureBenefitDocker / Docker ComposeOrchestration and ContainerizationEnsures a 100% consistent operating environment across different systems (Linux Fedora and Windows) and solves Python dependency conflicts.PythonCore Implementation LanguageUsed across all ingestion and processing containers.PostgreSQL (db)Central Database / Shared StateA high-integrity, relational database serving as the single source of truth for all raw data, projections, and lineup results.Shared common LibraryCode ReusabilityA locally mounted Python package containing shared database models (SQLAlchemy/SQLModel) and utility functions, drastically reducing redundant code across multiple services.5. Architectural BenefitsCross-OS Compatibility: The platform works identically on both Linux and Windows environments due to Docker encapsulation.Fault Tolerance: A failure in one service (e.g., the Odds scraper) will not crash unrelated services (e.g., the Simulation Engine).Scalability & Maintenance: Services can be scaled up (by running more instances of a container) or updated (by rebuilding a single Docker image) without affecting the others.Clear Separation of Concerns: Enforces modular code practices, making the codebase easier to debug, test, and expand as new features (e.g., player props analysis) are introduced.
